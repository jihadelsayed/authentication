<div class="body-signup">
    <div class="signup-layout">
        <div class="signup-top">
    <!-- Left Panel -->
    <div class="left-panel">
      <img src="https://i.imgur.com/3fLGfPn.png" alt="Neetechs Logo" />
      <h2 class="step-indicator">Create your Neetechs account</h2>
      <p class="login-link">Already have an account? <a routerLink="/login">Log In</a></p>

      <p class="step-indicator">Step {{step}} of 3</p>
    </div>
  
    <!-- Right Panel (Form) -->
    <div class="right-panel signup-container">

     <!-- Left: Logo -->
     <ng-container *ngIf="!stepLoading; else loadingSpinner">

     <form #signupForm="ngForm" (ngSubmit)="OnSubmit(signupForm)">
      <!-- Step 1 -->
      <div class="stepDev" *ngIf="step === 1">
       <!-- Toggle -->
       <p class="toggle-note">
        Choose how you'd like to sign up. You‚Äôll receive a confirmation code via your selected method.
      </p>
      
      <div class="toggle-group">
        <button type="button" [class.active]="!useEmail" (click)="useEmail = false">Mobile Number</button>
        <button type="button" [class.active]="useEmail" (click)="useEmail = true">Email</button>
        
      </div>
  
      <!-- Conditional Fields -->
      <div *ngIf="useEmail; else phoneBlock">
        <input
          type="email"
          name="email"
          [(ngModel)]="user.email"
          placeholder="Email"
          required
          autocomplete="email"
          #emailRef="ngModel"
          [class.invalid]="emailRef.invalid && emailRef.touched" />
        <div *ngIf="emailRef.invalid && emailRef.touched" class="error">Invalid email address</div>
      </div>
  
      <ng-template #phoneBlock>
        <input
        type="tel"
        name="phone"
        [(ngModel)]="user.phone"
        required
        #phoneRef="ngModel"
        [class.invalid]="phoneRef.invalid && phoneRef.touched"
        (blur)="phoneTouched = true" />
      
      <div *ngIf="phoneRef.invalid && phoneTouched" class="error">
        Invalid phone number
      </div>
      
      </ng-template>
        <!-- Terms -->
         
        <label class="terms-checkbox">
          <input
            type="checkbox"
            name="smsConsent"
            [(ngModel)]="user.smsConsent"
            required />
          By clicking "Create Account", you agree to
          <a href="#" target="_blank">Terms of Service</a> and
          <a href="#" target="_blank">Privacy Policy</a>
        </label>
        <button type="button" class="nextButton" (click)="nextStepWithSpinner()">Next</button>
      </div>
    
      <!-- Step 2 -->
      <div class="stepDev" *ngIf="step === 2">
        <input type="text" name="first_name" [(ngModel)]="user.first_name" placeholder="First Name" required />
        <input type="text" name="username" [(ngModel)]="user.username" placeholder="Username" required />
    
        <button type="button" class="backButton" (click)="prevStepWithSpinner()">Back</button>
        <button type="button" [disabled]="stepLoading" class="nextButton" (click)="nextStepWithSpinner()">
          <ng-container *ngIf="!stepLoading; else spinning">
            Next
          </ng-container>
          <ng-template #spinning>
            <img src="https://i.imgur.com/llF5iyg.gif" alt="loading" width="20" />
          </ng-template>
        </button>      
      
      </div>
    
      <!-- Step 3 -->
      <div class="stepDev" *ngIf="step === 3">
<!-- Password -->
<div class="password-group">
  <input
    [type]="showPassword ? 'text' : 'password'"
    name="password1"
    [(ngModel)]="user.password1"
    placeholder="Password"
    required
    autocomplete="new-password" />
  <button type="button" (click)="showPassword = !showPassword" class="toggle-eye">üëÅ</button>
</div>

<!-- Confirm Password -->
<div class="password-group">
  <input
    [type]="showPassword ? 'text' : 'password'"
    name="password2"
    [(ngModel)]="user.password2"
    placeholder="Confirm Password"
    required
    autocomplete="new-password" />
  <button type="button" (click)="showPassword = !showPassword" class="toggle-eye">üëÅ</button>
</div>




        
        <button type="button" class="backButton" (click)="prevStepWithSpinner()">Back</button>
                <!-- Submit -->
                <button [disabled]="loading" type="submit" class="submit-btn">
                  <span *ngIf="!loading">Create Account</span>
                  <span *ngIf="loading">‚è≥ Creating...</span>
                </button>
      </div>
    </form>
  </ng-container>
  <ng-template #loadingSpinner>
    <div class="step-spinner">
      <img src="https://i.imgur.com/llF5iyg.gif" alt="Loading..." />
    </div>
  </ng-template>
    <form #signupForm="ngForm" (ngSubmit)="OnSubmit(signupForm)" role="form">

  
      <!-- Password -->

  
      <div class="divider">Or sign up with</div>
  
      <div class="oauth-buttons">
        <button type="button" class="oauth google">Google</button>
        <button type="button" class="oauth apple">Apple</button>
      </div>
    </form>

    </div>

  

    </div>
          <!-- Footer -->
          <footer class="form-footer">
            <select [(ngModel)]="language">
                <option value="en">English</option>
                <option value="es">Espa√±ol</option>
                <!-- add more if needed -->
              </select>
              <div>
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="#">Help</a>
              </div>
    
          </footer>
        </div>   
     </div>